<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gigzera</title>
    <link rel="stylesheet" href="../css/profile.css" />
    <link rel="stylesheet" href="../css/navbar.css" />
    <link rel="stylesheet" href="../css/footer.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <div class="page-wrapper">
      <!-- Header -->
      <div id="navbar"></div>
    </div>
    <!-- Main Content -->
    <main id="main" class="main-content">
      <div class="container">
        <div class="content-grid">
          <!-- Profile Section -->
          <div id="profile-section" class="profile-section">
            <div class="profile-card">
              <div class="edit-button">
                <button onclick="toggleEditForm()">
                  <i class="fa-regular fa-edit"></i>
                </button>
              </div>
              <div class="profile-info">
                <img
                  src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"
                  alt="Profile"
                  class="profile-image"
                  id="profile-image"
                />
                <h1 class="profile-name" id="profile-name">John Anderson</h1>
                <p class="profile-title" id="profile-title">
                  Senior Project Manager
                </p>
                <div class="contact-info">
                  <div class="contact-item">
                    <i class="fa-regular fa-envelope"></i>
                    <span id="profile-email">john.anderson@gigzera.com</span>
                  </div>
                  <div class="contact-item">
                    <i class="fa-regular fa-phone"></i>
                    <span id="profile-phone">+1 (555) 123-4567</span>
                  </div>
                  <div class="contact-item">
                    <i class="fa-brands fa-linkedin"></i>
                    <a
                      href="https://linkedin.com/in/johnanderson"
                      id="profile-linkedin"
                      >linkedin.com/in/johnanderson</a
                    >
                  </div>
                  <div class="contact-item">
                    <i class="fa-regular fa-building"></i>
                    <span id="profile-company">Tech Solutions Inc.</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="edit-form" id="edit-form">
              <input type="file" id="edit-image" accept="image/*" />
              <input
                type="text"
                id="edit-name"
                placeholder="Name"
                value="John Anderson"
              />
              <input
                type="text"
                id="edit-title"
                placeholder="Title"
                value="Senior Project Manager"
              />
              <input
                type="email"
                id="edit-email"
                placeholder="Email"
                value="john.anderson@gigzera.com"
              />
              <input
                type="text"
                id="edit-phone"
                placeholder="Phone"
                value="+1 (555) 123-4567"
              />
              <input
                type="url"
                id="edit-linkedin"
                placeholder="LinkedIn Profile"
                value="https://linkedin.com/in/johnanderson"
              />
              <input
                type="text"
                id="edit-company"
                placeholder="Company"
                value="Tech Solutions Inc."
              />
              <button onclick="saveChanges()">Save Changes</button>
            </div>
          </div>

          <!-- Action Section -->
          <div id="action-section" class="action-section">
            <div class="action-card">
              <div class="card-header">
                <h2>Post a New Job</h2>
                <i class="fa-solid fa-plus"></i>
              </div>
              <p>
                Create a new job posting to find the perfect talent for your
                project.
              </p>
              <button class="action-button">Create Job Post</button>
            </div>

            <div class="action-card">
              <div class="card-header">
                <h2>Project Tracking</h2>
                <i class="fa-solid fa-chart-line"></i>
              </div>
              <p>Monitor and manage your ongoing projects efficiently.</p>
              <!-- <button class="action-button">View Projects</button> -->
              <button
                class="action-button"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal"
              >
                View Projects
              </button>
            </div>

            <!-- Modal structure -->
            <div
              class="modal fade"
              id="createJobModal"
              tabindex="-1"
              aria-labelledby="createJobModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-dialog-centered">
                <div
                  class="modal-content"
                  style="max-width: 600px; width: 100%"
                >
                  <div class="modal-header">
                    <h2
                      class="modal-title"
                      id="createJobModalLabel"
                      style="flex: 1; text-align: center; font-size: 1.8rem"
                    >
                      Post a Job
                    </h2>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div class="modal-body">
                    <form class="form-content">
                      <label for="project-type">Project Type</label>
                      <select id="project-type">
                        <option>Gig (Individual Freelancer Project)</option>
                        <option>
                          Project (Multiple Team Members Involved)
                        </option>
                      </select>

                      <label for="project-title">Project Title</label>
                      <input
                        type="text"
                        id="project-title"
                        placeholder="Enter project title"
                      />

                      <label for="skills-required">Skills Required</label>
                      <div id="skills-container">
                        <input
                          type="text"
                          id="skills-required"
                          placeholder="Add skills"
                        />
                        <ul id="suggestions-list" class="suggestions-list"></ul>
                      </div>
                      <div id="selected-skills" class="selected-skills"></div>

                      <label for="project-description"
                        >Project Description</label
                      >
                      <textarea
                        id="project-description"
                        rows="4"
                        placeholder="Describe your project"
                      ></textarea>

                      <div class="form-group">
                        <div class="select-container">
                          <label for="currency">Currency</label>
                          <select id="currency">
                            <option>USD</option>
                            <option>EUR</option>
                            <option>GBP</option>
                          </select>
                        </div>

                        <div class="select-container">
                          <label for="budget-range">Budget Range</label>
                          <select id="budget-range">
                            <option>1,000 - 5,000</option>
                            <option>5,000 - 10,000</option>
                            <option>10,000 - 20,000</option>
                          </select>
                        </div>
                      </div>

                      <label for="deliverables">Project Deliverables</label>
                      <input
                        type="text"
                        id="deliverables"
                        placeholder="Add deliverables"
                      />

                      <label for="candidate-details"
                        >Ideal Candidate Details</label
                      >
                      <textarea
                        id="candidate-details"
                        rows="3"
                        placeholder="Describe ideal candidate"
                      ></textarea>

                      <label for="challenges">Possible Challenges</label>
                      <textarea
                        id="challenges"
                        rows="3"
                        placeholder="List potential challenges"
                      ></textarea>

                      <label for="time-zone">Preferred Time Zone</label>
                      <select id="time-zone">
                        <option>UTC-8 (PST)</option>
                        <option>UTC-5 (EST)</option>
                        <option>UTC+1 (CET)</option>
                      </select>

                      <button
                        type="button"
                        onclick="submitJobPost()"
                        class="get-started-btn"
                      >
                        Post Job
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <style>
              /* Styles for the Post a Job Modal */
              .modal-dialog {
                display: flex;
                justify-content: center;
                align-items: center; /* Centering in vertical direction */
                margin: auto;
              }

              .modal-content {
                border-radius: 8px;
                border: none;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
              }

              .modal-header {
                display: flex;
                align-items: center;
              }

              .modal-title {
                flex: 1; /* Flex to center title */
                text-align: center;
                font-size: 1.8rem; /* Increased font size for heading */
              }

              .modal-body {
                display: flex;
                flex-direction: column;
                max-height: 500px; /* Set a fixed height for the modal body */
                overflow-y: auto; /* Enable scroll if needed */
                padding: 20px; /* Add some padding */
              }

              /* Ensure the header and footer doesn't scroll with the content */
              .modal-footer {
                padding: 10px;
                border-top: 1px solid #e9ecef;
                display: flex;
                justify-content: flex-end; /* Alignment for footer content */
              }

              .modal-body label {
                display: block;
                margin-bottom: 5px;
                font-weight: bold;
                text-align: left; /* Align label text to the left */
              }

              .modal-body input,
              .modal-body select,
              .modal-body textarea {
                width: 100%;
                padding: 8px;
                margin-bottom: 10px;
                border: 1px solid #ccc;
                border-radius: 4px;
                box-sizing: border-box;
              }

              .modal-body textarea {
                resize: none;
              }

              .modal-body button {
                width: 100%;
                padding: 10px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 4px;
                font-size: 1rem;
                cursor: pointer;
              }

              .modal-body button:hover {
                background-color: #0056b3;
              }

              /* Skill tags styling */
              .skill-tag {
                display: inline-block;
                background-color: #4caf50;
                color: white;
                padding: 5px 10px;
                margin: 5px;
                border-radius: 15px;
                font-size: 14px;
                cursor: pointer;
              }

              .remove-skill {
                margin-left: 10px;
                cursor: pointer;
                color: #fff;
              }

              .remove-skill:hover {
                color: red;
              }

              /* Suggestions List */
              .suggestions-list {
                list-style: none;
                padding: 0;
                margin-top: 5px;
                border: 1px solid #ccc;
                background-color: #fff;
                max-height: 200px;
                overflow-y: auto;
                display: none;
                position: absolute;
                width: 100%;
                z-index: 1000;
              }

              .suggestion-item {
                padding: 8px;
                cursor: pointer;
              }

              .suggestion-item:hover {
                background-color: #f0f0f0;
              }

              /* Form group for currency and budget */
              .form-group {
                display: flex;
                justify-content: space-between;
                gap: 20px;
              }

              .select-container {
                flex: 1;
              }

              .select-container label {
                display: block;
                margin-bottom: 5px;
                text-align: left; /* Align label text to the left */
              }

              .select-container select {
                width: 100%;
                padding: 8px;
                font-size: 16px;
                border-radius: 5px;
                border: 1px solid #ccc;
              }

              /* Get Started Button */
              .get-started-btn {
                border: none;
                background-color: transparent;
                color: #007bff;
                font-size: 1rem;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s ease-in-out;
              }

              .get-started-btn:hover {
                color: #0c0c0c;
              }

              /* Responsive styling */
              @media (max-width: 768px) {
                .modal-dialog {
                  width: 90%;
                  margin: 20px auto;
                }

                .modal-content {
                  max-width: 100%; /* Allow full width on smaller screens */
                }
              }
            </style>

            <!-- Script to handle the modal functionality -->
            <script>
              document.addEventListener("DOMContentLoaded", function () {
                // Update the Create Job Post button to trigger the modal
                const createJobButtons =
                  document.querySelectorAll(".action-button");
                createJobButtons.forEach((button) => {
                  if (button.textContent.trim() === "Create Job Post") {
                    button.setAttribute("data-bs-toggle", "modal");
                    button.setAttribute("data-bs-target", "#createJobModal");
                  }
                });

                // Skills functionality
                const skillsInput = document.getElementById("skills-required");
                const suggestionsList =
                  document.getElementById("suggestions-list");
                const selectedSkillsContainer =
                  document.getElementById("selected-skills");
                const availableSkills = [
                  "JavaScript",
                  "Python",
                  "React",
                  "Node.js",
                  "Angular",
                  "Django",
                  "HTML",
                  "CSS",
                  "Java",
                  "C++",
                  "Ruby",
                  "SQL",
                  "TypeScript",
                ];
                let selectedSkills = [];

                // Show suggestions based on input
                skillsInput.addEventListener("input", () => {
                  const inputValue = skillsInput.value.toLowerCase().trim();
                  if (inputValue === "") {
                    suggestionsList.style.display = "none";
                    return;
                  }

                  const filteredSkills = availableSkills.filter(
                    (skill) =>
                      skill.toLowerCase().includes(inputValue) &&
                      !selectedSkills.includes(skill)
                  );

                  if (filteredSkills.length > 0) {
                    suggestionsList.innerHTML = filteredSkills
                      .map(
                        (skill) => `<li class="suggestion-item">${skill}</li>`
                      )
                      .join("");
                    suggestionsList.style.display = "block";
                  } else {
                    suggestionsList.style.display = "none";
                  }
                });

                // Add a skill when a suggestion is clicked
                suggestionsList.addEventListener("click", (e) => {
                  if (e.target.classList.contains("suggestion-item")) {
                    const skill = e.target.textContent.trim();
                    addSkill(skill);
                    skillsInput.value = "";
                    suggestionsList.style.display = "none";
                  }
                });

                // Add skill when Enter is pressed
                skillsInput.addEventListener("keydown", (e) => {
                  if (e.key === "Enter" && skillsInput.value.trim()) {
                    e.preventDefault();
                    const skill = skillsInput.value.trim();
                    addSkill(skill);
                    skillsInput.value = "";
                  }
                });

                // Add skill function
                function addSkill(skill) {
                  if (!selectedSkills.includes(skill)) {
                    selectedSkills.push(skill);

                    const skillTag = document.createElement("div");
                    skillTag.className = "skill-tag";
                    skillTag.innerHTML = `${skill}<span class="remove-skill" onclick="removeSkill('${skill}')">&times;</span>`;

                    selectedSkillsContainer.appendChild(skillTag);
                  }
                }

                // Make removeSkill available globally
                window.removeSkill = function (skill) {
                  selectedSkills = selectedSkills.filter((s) => s !== skill);
                  if (!availableSkills.includes(skill)) {
                    availableSkills.push(skill);
                  }
                  skillsInput.dispatchEvent(new Event("input"));
                  const skillTags = Array.from(
                    selectedSkillsContainer.getElementsByClassName("skill-tag")
                  );
                  skillTags.forEach((tag) => {
                    if (tag.textContent.includes(skill)) {
                      tag.remove();
                    }
                  });
                };

                // Hide suggestions when clicking outside
                document.addEventListener("click", (e) => {
                  if (
                    !document
                      .getElementById("skills-container")
                      .contains(e.target)
                  ) {
                    suggestionsList.style.display = "none";
                  }
                });
              });

              function submitJobPost() {
                window.location.href = "get-started.html";
              }
            </script>
            <style>
              /* Modal Background */
              .modal-content {
                border-radius: 15px;
                border: none;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                background-color: #fff;
              }

              /* Modal Header */
              .modal-header {
                border-bottom: none;
                text-align: center;
                justify-content: center;
              }

              .modal-title {
                font-weight: bold;
                font-size: 1.5rem;
                color: #000;
              }

              /* Close Button */
              .btn-close {
                background-color: transparent;
                border: none;
                opacity: 0.8;
                font-size: 1.2rem;
                cursor: pointer;
                transition: opacity 0.2s ease-in-out;
              }

              .btn-close:hover {
                opacity: 1;
              }

              /* Modal Body */
              .modal-body {
                text-align: center;
                padding: 30px;
              }

              /* Buttons */
              button.view-ongoing,
              button.view-bids {
                width: 100%;
                border: none;
                border-radius: 8px;
                padding: 15px;
                font-size: 1rem;
                margin-bottom: 20px;
                cursor: pointer;
                font-weight: bold;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
                transition: all 0.3s ease-in-out;
              }

              /* Ongoing Projects Button */
              button.view-ongoing {
                background-color: #d9fdd3; /* Light green background */
                color: #228b22; /* Forest green text */
              }

              button.view-ongoing:hover {
                background-color: #c4e8bf; /* Slightly darker green */
              }

              /* Bids Button */
              button.view-bids {
                background-color: #f3e8ff; /* Light purple background */
                color: #8a2be2; /* Blue violet text */
              }

              button.view-bids:hover {
                background-color: #e1d4f6; /* Slightly darker purple */
              }

              /* Footer Text */
              .modal-body h5 {
                font-size: 0.9rem;
                color: #333;
                margin-top: 10px;
              }
            </style>

            <!-- Modal -->
            <div
              class="modal fade"
              id="exampleModal"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                      View Projects
                    </h1>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div class="modal-body">
                    <button
                      class="view-ongoing"
                      onclick="window.location.href='./recruiterProjectTrackingMultiple.html';"
                    >
                      <i class="fa-solid fa-bars"></i> View Ongoing Projects
                    </button>
                    <!-- <button class="view-ongoing"><i class="fa-solid fa-bars"></i> View Ongoing Projects</button> -->
                    <button class="view-bids" onclick="redirectToBids()">
                      <i class="fa-solid fa-chart-line"></i> View Bids for New
                      Projects
                    </button>
                    <h5>
                      Select an option to navigate to the respective project
                      area
                    </h5>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <div id="footer"></div>

    <script>
      function redirectToBids() {
        window.location.href = "./Recruiter Bid Tracker (Multiple).html  ";
      }
    </script>

    <script>
      // Save profile changes to localStorage
      function saveProfile() {
        const name = document.getElementById("edit-name").value.trim();
        const email = document.getElementById("edit-email").value.trim();
        const title = document.getElementById("edit-title").value.trim();
        const phone = document.getElementById("edit-phone").value.trim();
        const linkedin = document.getElementById("edit-linkedin").value.trim();
        const company = document.getElementById("edit-company").value.trim();
        const imageInput = document.getElementById("edit-image");

        if (name && email) {
          // Generate initials from the name
          const initials = name
            .split(" ")
            .map((word) => word[0].toUpperCase())
            .join("");

          // Save name, email, title, phone, linkedin, and company to localStorage
          localStorage.setItem("profileName", name);
          localStorage.setItem("profileEmail", email);
          localStorage.setItem("profileTitle", title);
          localStorage.setItem("profilePhone", phone);
          localStorage.setItem("profileLinkedin", linkedin);
          localStorage.setItem("profileCompany", company);
          localStorage.setItem("profileInitials", initials);

          // Save profile image if uploaded
          if (imageInput.files && imageInput.files[0]) {
            const reader = new FileReader();
            reader.onload = function (e) {
              localStorage.setItem("profileImage", e.target.result);
              alert("Profile updated successfully!");
              window.location.href = "../index.html";
            };
            reader.readAsDataURL(imageInput.files[0]);
          } else {
            alert("Profile updated successfully!");
            window.location.href = "../index.html";
          }
        } else {
          alert("Please fill out all required fields!");
        }
      }

      // Pre-fill the form with existing localStorage data
      function prefillProfileForm() {
        const name = localStorage.getItem("profileName") || "John Anderson";
        const email =
          localStorage.getItem("profileEmail") || "john.anderson@gigzera.com";
        const title =
          localStorage.getItem("profileTitle") || "Senior Project Manager";
        const phone =
          localStorage.getItem("profilePhone") || "+1 (555) 123-4567";
        const linkedin =
          localStorage.getItem("profileLinkedin") ||
          "https://linkedin.com/in/johnanderson";
        const company =
          localStorage.getItem("profileCompany") || "Tech Solutions Inc.";
        const image = localStorage.getItem("profileImage");

        document.getElementById("edit-name").value = name;
        document.getElementById("edit-email").value = email;
        document.getElementById("edit-title").value = title;
        document.getElementById("edit-phone").value = phone;
        document.getElementById("edit-linkedin").value = linkedin;
        document.getElementById("edit-company").value = company;

        // Set profile image preview
        if (image) {
          document.getElementById("profile-image").src = image;
        }
      }

      document.addEventListener("DOMContentLoaded", prefillProfileForm);
    </script>
    <script>
      function toggleEditForm() {
        const form = document.getElementById("edit-form");
        form.style.display = form.style.display === "none" ? "block" : "none";
      }

      function saveChanges() {
        const name = document.getElementById("edit-name").value;
        const title = document.getElementById("edit-title").value;
        const email = document.getElementById("edit-email").value;
        const phone = document.getElementById("edit-phone").value;
        const linkedin = document.getElementById("edit-linkedin").value;
        const company = document.getElementById("edit-company").value;

        const profileImageInput = document.getElementById("edit-image");
        const profileImage = document.getElementById("profile-image");

        if (profileImageInput.files && profileImageInput.files[0]) {
          const reader = new FileReader();
          reader.onload = function (e) {
            profileImage.src = e.target.result;
          };
          reader.readAsDataURL(profileImageInput.files[0]);
        }

        document.getElementById("profile-name").textContent = name;
        document.getElementById("profile-title").textContent = title;
        document.getElementById("profile-email").textContent = email;
        document.getElementById("profile-phone").textContent = phone;
        document.getElementById("profile-linkedin").href = linkedin;
        document.getElementById("profile-linkedin").textContent = linkedin;
        document.getElementById("profile-company").textContent = company;

        toggleEditForm();
      }
    </script>
    <script type="module" src="../javascript/navbar.js"></script>
  </body>
</html>
